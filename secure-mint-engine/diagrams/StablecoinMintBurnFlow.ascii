╔══════════════════════════════════════════════════════════════════════════════╗
║                    STABLECOIN MINT / BURN FLOW                               ║
║                    With Evidence Logging and Compliance                      ║
╚══════════════════════════════════════════════════════════════════════════════╝

  ══════════════════════════  MINT FLOW  ══════════════════════════════════

  ┌────────────────┐
  │  USER REQUEST  │   amount, collateral type, destination address
  │  mint(amount)  │
  └───────┬────────┘
          │
          ▼
  ┌────────────────┐     ┌────────────────────────────────────┐
  │  COMPLIANCE    │     │  Checks:                           │
  │  CHECK         │────▶│  - KYC/AML status verified         │
  │                │     │  - Sanctions screening passed      │
  │                │     │  - Jurisdiction allowed             │
  └───────┬────────┘     └────────────────────────────────────┘
          │ PASS
          ▼
  ┌────────────────┐     ┌────────────────────────────────────┐
  │  ORACLE        │     │  Validations:                      │
  │  VALIDATION    │────▶│  - Price feed not stale (< 1hr)    │
  │                │     │  - Deviation < 2% from median      │
  │                │     │  - Multi-oracle consensus reached   │
  └───────┬────────┘     └────────────────────────────────────┘
          │ PASS
          ▼
  ┌────────────────┐     ┌────────────────────────────────────┐
  │  BACKING       │     │  Requirements:                     │
  │  CHECK         │────▶│  - Collateral deposited            │
  │                │     │  - Ratio >= 100% (overcollateral.) │
  │                │     │  - Reserve health factor > 1.0     │
  └───────┬────────┘     └────────────────────────────────────┘
          │ PASS
          ▼
  ┌────────────────┐     ┌────────────────────────────────────┐
  │  RATE LIMIT    │     │  Limits:                           │
  │  ENFORCEMENT   │────▶│  - Per-user: 1M / 24h             │
  │                │     │  - Per-block: 500K                  │
  │                │     │  - Global: 50M / 24h               │
  └───────┬────────┘     └────────────────────────────────────┘
          │ PASS
          ▼
  ┌────────────────┐       ┌───────────────────────────────┐
  │  MINT          │       │  Evidence Log Entry:           │
  │  EXECUTION     │──────▶│  {                             │
  │                │       │    txHash, timestamp,          │
  │  token.mint(   │       │    minter, amount,             │
  │    to, amount) │       │    oraclePrice, collateral,    │
  │                │       │    backingRatio, blockNumber   │
  └───────┬────────┘       │  }                             │
          │                └───────────────────────────────┘
          ▼
  ┌────────────────┐
  │  CONFIRMATION  │   Emit MintExecuted event
  │  & RECEIPT     │   Return tx receipt to user
  └────────────────┘

  ══════════════════════════  BURN FLOW  ══════════════════════════════════

  ┌────────────────┐
  │  USER REQUEST  │   amount, redemption preference
  │  burn(amount)  │
  └───────┬────────┘
          │
          ▼
  ┌────────────────┐     ┌────────────────────────────────────┐
  │  BALANCE       │     │  Checks:                           │
  │  VERIFICATION  │────▶│  - User holds sufficient tokens    │
  │                │     │  - Tokens not locked/vesting        │
  └───────┬────────┘     └────────────────────────────────────┘
          │ PASS
          ▼
  ┌────────────────┐     ┌────────────────────────────────────┐
  │  ORACLE        │     │  Same validation as mint:          │
  │  VALIDATION    │────▶│  - Fresh price, consensus,         │
  │                │     │  - Deviation within bounds          │
  └───────┬────────┘     └────────────────────────────────────┘
          │ PASS
          ▼
  ┌────────────────┐       ┌───────────────────────────────┐
  │  BURN          │       │  Evidence Log Entry:           │
  │  EXECUTION     │──────▶│  {                             │
  │                │       │    txHash, timestamp,          │
  │  token.burn(   │       │    burner, amount,             │
  │    from,amount)│       │    oraclePrice, redemption,    │
  └───────┬────────┘       │    collateralReleased          │
          │                │  }                             │
          ▼                └───────────────────────────────┘
  ┌────────────────┐
  │  COLLATERAL    │   Release backing collateral
  │  RELEASE       │   to user's address
  └───────┬────────┘
          ▼
  ┌────────────────┐
  │  CONFIRMATION  │   Emit BurnExecuted event
  │  & RECEIPT     │   Return tx receipt + collateral info
  └────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│  LEGEND                                                                      │
│                                                                              │
│  -->   Flow direction           PASS  Gate check succeeded                   │
│  ┌─┐   Process step            { }   Evidence log payload                   │
│  ════  Section separator        KYC   Know Your Customer                     │
└──────────────────────────────────────────────────────────────────────────────┘
